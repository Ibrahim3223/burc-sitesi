{{- define "main" }}

<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <!-- Meta Bilgiler (JavaScript ile dinamik gÃ¼ncellenir) -->
            <div class="hero-meta">
                <span class="hero-meta-item">
                    <span class="meta-icon">ğŸ“…</span>
                    <span class="meta-text" id="currentDate">{{- partial "turkish-date.html" . -}}</span>
                </span>
                <span class="hero-meta-item">
                    <span class="meta-icon">ğŸŒ™</span>
                    <span class="meta-text" id="moonPhase">Ay FazÄ±</span>
                </span>
                <span class="hero-meta-item" id="retrogradeItem" style="display: none;">
                    <span class="meta-icon">â­</span>
                    <span class="meta-text" id="retrogradeText">MerkÃ¼r Retrograd</span>
                </span>
            </div>

            <script>
            // TÃ¼rkÃ§e tarih gÃ¼ncelleme
            (function() {
                const aylar = ['Ocak', 'Åubat', 'Mart', 'Nisan', 'MayÄ±s', 'Haziran',
                               'Temmuz', 'AÄŸustos', 'EylÃ¼l', 'Ekim', 'KasÄ±m', 'AralÄ±k'];
                const now = new Date();
                const tarih = now.getDate() + ' ' + aylar[now.getMonth()] + ' ' + now.getFullYear();
                document.getElementById('currentDate').textContent = tarih;

                // Ay fazÄ± hesaplama (basitleÅŸtirilmiÅŸ)
                function getMoonPhase(date) {
                    let year = date.getFullYear();
                    let month = date.getMonth() + 1;
                    const day = date.getDate();

                    if (month < 3) {
                        year--;
                        month += 12;
                    }
                    ++month;
                    const c = 365.25 * year;
                    const e = 30.6 * month;
                    let jd = c + e + day - 694039.09;
                    jd /= 29.5305882;
                    let b = parseInt(jd);
                    jd -= b;
                    b = Math.round(jd * 8);
                    if (b >= 8) b = 0;

                    const phases = ['Yeni Ay', 'Hilal (BÃ¼yÃ¼yen)', 'Ä°lk DÃ¶rdÃ¼n', 'ÅiÅŸkin Ay (BÃ¼yÃ¼yen)',
                                   'Dolunay', 'ÅiÅŸkin Ay (KÃ¼Ã§Ã¼len)', 'Son DÃ¶rdÃ¼n', 'Hilal (KÃ¼Ã§Ã¼len)'];
                    return phases[b];
                }

                document.getElementById('moonPhase').textContent = getMoonPhase(now);

                // MerkÃ¼r retrograd dÃ¶nemleri 2025 (yaklaÅŸÄ±k tarihler)
                const retrograds = [
                    { start: new Date(2025, 2, 15), end: new Date(2025, 3, 7) },   // 15 Mart - 7 Nisan
                    { start: new Date(2025, 6, 18), end: new Date(2025, 7, 11) },  // 18 Temmuz - 11 AÄŸustos
                    { start: new Date(2025, 10, 9), end: new Date(2025, 10, 29) }  // 9 KasÄ±m - 29 KasÄ±m
                ];

                const isRetrograde = retrograds.some(r => now >= r.start && now <= r.end);
                if (isRetrograde) {
                    document.getElementById('retrogradeItem').style.display = 'inline-flex';
                }
            })();
            </script>

            <h1 class="hero-title">BurÃ§ SÃ¶zlÃ¼ÄŸÃ¼</h1>
            <p class="hero-subtitle">12 burÃ§ iÃ§in gÃ¼nlÃ¼k, haftalÄ±k ve aylÄ±k yorumlar</p>

            <!-- Arama Kutusu -->
            <div class="hero-search">
                <div class="search-box">
                    <input type="text"
                           class="search-input"
                           placeholder="Burcunuzu arayÄ±n... (Ã¶rn: KoÃ§, BoÄŸa)"
                           id="heroSearch"
                           autocomplete="off">
                    <button class="search-button" onclick="searchZodiac()">
                        <span>Ara</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- BurÃ§ KartlarÄ± -->
        <div class="zodiac-grid">
            {{- range $key, $burc := .Site.Params.burclar }}
            {{- $gunlukPath := printf "gunluk/%s.md" $key }}
            {{- $gunluk := $.Site.GetPage $gunlukPath }}
            <div class="zodiac-card-premium" style="--burc-color: {{ $burc.renk }}">
                <div class="card-header">
                    <span class="element-badge element-{{ lower $burc.element }}">{{ $burc.element }}</span>
                </div>

                <div class="card-body">
                    <h3 class="zodiac-name">{{ $burc.ad }}</h3>
                    <p class="zodiac-date">{{ $burc.tarih }}</p>

                    {{- if $gunluk }}
                    <p class="zodiac-preview">BugÃ¼nÃ¼n enerjisi, fÄ±rsatlarÄ± ve dikkat edilmesi gerekenler hakkÄ±nda detaylÄ± analiz</p>
                    {{- else }}
                    <p class="zodiac-preview zodiac-no-data">{{ $burc.ad }} burcu Ã¶zellikleri, kiÅŸilik analizi ve uyumu</p>
                    {{- end }}
                </div>

                <div class="card-footer">
                    {{- if $gunluk }}
                    <a href="/gunluk/{{ $key }}/" class="card-cta">
                        <span>GÃ¼nlÃ¼k Yorum</span>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    {{- else }}
                    <a href="/{{ $burc.slug }}/" class="card-cta">
                        <span>BurÃ§ DetayÄ±</span>
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </a>
                    {{- end }}
                </div>
            </div>
            {{- end }}
        </div>
    </div>
</section>

<!-- BurÃ§ Uyumu Widget -->
<section class="compatibility-widget">
    <div class="container">
        <h2 class="section-title">BurÃ§ Uyumu Hesapla</h2>
        <p class="section-subtitle">Ä°ki burÃ§ arasÄ±ndaki uyumu Ã¶ÄŸrenin</p>

        <div class="compatibility-calculator">
            <div class="compatibility-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="burc1">Birinci BurÃ§</label>
                        <select id="burc1" class="form-select">
                            <option value="">SeÃ§iniz</option>
                            {{- range $key, $burc := .Site.Params.burclar }}
                            <option value="{{ $burc.slug }}" data-name="{{ $burc.ad }}" data-element="{{ $burc.element }}">{{ $burc.ad }}</option>
                            {{- end }}
                        </select>
                    </div>

                    <div class="compatibility-vs">
                        <span class="vs-icon">ğŸ’•</span>
                    </div>

                    <div class="form-group">
                        <label for="burc2">Ä°kinci BurÃ§</label>
                        <select id="burc2" class="form-select">
                            <option value="">SeÃ§iniz</option>
                            {{- range $key, $burc := .Site.Params.burclar }}
                            <option value="{{ $burc.slug }}" data-name="{{ $burc.ad }}" data-element="{{ $burc.element }}">{{ $burc.ad }}</option>
                            {{- end }}
                        </select>
                    </div>
                </div>

                <button onclick="calculateCompatibility()" class="btn-compatibility">
                    <span class="btn-icon">âœ¨</span>
                    <span class="btn-text">Uyumu Hesapla</span>
                </button>
            </div>

            <!-- SonuÃ§ AlanÄ± -->
            <div id="compatibilityResult" class="compatibility-result" style="display: none;">
                <div class="result-header">
                    <h3 class="result-title" id="resultTitle"></h3>
                    <div class="result-score">
                        <div class="score-circle">
                            <svg class="score-svg" viewBox="0 0 100 100">
                                <circle class="score-bg" cx="50" cy="50" r="45"></circle>
                                <circle class="score-fill" id="scoreCircle" cx="50" cy="50" r="45"></circle>
                            </svg>
                            <div class="score-text">
                                <span class="score-number" id="scoreNumber">0</span>
                                <span class="score-label">/10</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="result-body">
                    <div class="result-category">
                        <div class="category-icon">â¤ï¸</div>
                        <div class="category-content">
                            <h4>AÅŸk Uyumu</h4>
                            <div class="category-bar">
                                <div class="category-fill" id="loveFill"></div>
                            </div>
                            <p class="category-score" id="loveScore">0/10</p>
                        </div>
                    </div>

                    <div class="result-category">
                        <div class="category-icon">ğŸ¤</div>
                        <div class="category-content">
                            <h4>ArkadaÅŸlÄ±k Uyumu</h4>
                            <div class="category-bar">
                                <div class="category-fill" id="friendshipFill"></div>
                            </div>
                            <p class="category-score" id="friendshipScore">0/10</p>
                        </div>
                    </div>

                    <div class="result-category">
                        <div class="category-icon">ğŸ’¼</div>
                        <div class="category-content">
                            <h4>Ä°ÅŸ Uyumu</h4>
                            <div class="category-bar">
                                <div class="category-fill" id="workFill"></div>
                            </div>
                            <p class="category-score" id="workScore">0/10</p>
                        </div>
                    </div>
                </div>

                <div class="result-footer">
                    <p class="result-description" id="resultDescription"></p>
                    <a href="#" id="detailLink" class="btn-detail">DetaylÄ± Analiz</a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- HÄ±zlÄ± Linkler -->
<section class="quick-links">
    <div class="container">
        <div class="links-grid">
            <a href="/gunluk-burc-yorumlari/" class="link-card">
                <div class="link-icon">ğŸ“…</div>
                <h3>GÃ¼nlÃ¼k Yorumlar</h3>
                <p>Her gÃ¼n gÃ¼ncellenen burÃ§ yorumlarÄ±</p>
            </a>

            <a href="/haftalik-burc-yorumlari/" class="link-card">
                <div class="link-icon">ğŸ“Š</div>
                <h3>HaftalÄ±k Yorumlar</h3>
                <p>HaftalÄ±k detaylÄ± analizler</p>
            </a>

            <a href="/aylik-burc-yorumlari/" class="link-card">
                <div class="link-icon">ğŸ“ˆ</div>
                <h3>AylÄ±k Yorumlar</h3>
                <p>Ay boyunca neler olacak</p>
            </a>

            <a href="/yukselen-burc/" class="link-card">
                <div class="link-icon">ğŸŒ…</div>
                <h3>YÃ¼kselen BurÃ§</h3>
                <p>YÃ¼kselen burcunuzu hesaplayÄ±n</p>
            </a>
        </div>
    </div>
</section>

{{- end }}
